<div class="container mt-4">
  <!-- Carousel Section -->
  <div id="customCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <%= image_tag @partner.image, alt: "Le Wagon", width: 400, class:"image-centrale" %>
      </div>
      <div class="carousel-item">
        <img src="https://i.pinimg.com/control2/474x/73/c6/6a/73c66aaa605393d02c668889836aba34.jpg" alt="Second Slide" width=400 height=400>
      </div>
      <div class="carousel-item">
        <img src="https://i.pinimg.com/474x/ca/10/42/ca10425bd76226d1e166813edae18d04.jpg" alt="Second Slide" width=400 height=400>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#customCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#customCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <!-- Cards Section -->
  <div class="aligned-card-container">
    <!-- Title Card -->
    <div class="title-card">
      <div class="flat-show-card">
        <h1 class="fw-bold pb-4 border-bottom"><%= @partner.title %></h1>
        <h3 class="title-purple mt-5">A bit more about this partner...</h3>
        <p class="mt-3"><%= @partner.description %></p>
      </div>
    </div>

    <!-- Partner Up Card -->
    <div class="partner-up-card" data-controller="calcul-dates">
      <div class="card-body">
        <h5 class="card-title fw-bold mb-3">Partner up!</h5>
        <div class="mt-4">
          <%= simple_form_for ([@partner, @booking]) do |f|%>
            <div class="form-input">
              <%= f.input :start_date, label:"Date de début",
                          as: :string,
                          input_html: { data: { controller: "datepicker", calcul_dates_target: "startDate",
                              action: "input->calcul-dates#select" } } %>
              <%= f.input :end_date, label:"Date de fin",
                          as: :string,
                          input_html: { data: { controller: "datepicker", calcul_dates_target: "endDate",
                              action: "input->calcul-dates#select" } } %>
            </div>

            <div class="form-input-message">
               <%= f.input :message, as: :text %>
            </div>

            <div class="form-actions">
             <%= f.button :submit, value:"Réserver mon Partner", class:"button-form w-100"%>
            </div>
          <% end %>
        </div>

        <div class="flat-show-card d-flex justify-content-between">
          <h5 class="fw-bold">Détail</h5>
          <div class="d-flex gap-1">
            <p data-calcul-dates-target="fixedPrice"><%= @partner.price.to_i %>€ x</p>
            <p data-calcul-dates-target="totalDate"> 0 jour</p>
          </div>
        </div>
        <div class="border-top mt-3 pt-3 d-flex justify-content-between">
          <h5 class="fw-bold">Total</h5>
            <p data-calcul-dates-target="pricing">0€</p>
        </div>
      </div>
    </div>
  </div>
  <div class="card mt-4" style="width: 100%; height: 600px; border-radius: 10px;"
    data-controller="map"
    data-map-marker-value="<%= @marker %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
</div>
